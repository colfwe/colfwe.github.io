<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-10-31 四 22:35 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org1c8c883">1. 安装archlinux的记录过程</a>
<ul>
<li><a href="#org819a752">1.1. 0. 特别感谢</a></li>
<li><a href="#orgd707436">1.2. 1. efi分区扩容</a></li>
<li><a href="#orgbe26185">1.3. 2. 下载镜像</a></li>
<li><a href="#org45bc220">1.4. 3. archiso过程记录</a>
<ul>
<li><a href="#orga594fe2">1.4.1. (1) 联网iwctl</a></li>
<li><a href="#org3f4b0be">1.4.2. (2) 设置系统时间</a></li>
<li><a href="#org8135a4c">1.4.3. (3) fdisk分区</a></li>
<li><a href="#orgedf4c9f">1.4.4. (4) 挂载分区</a></li>
<li><a href="#orgc8b6e10">1.4.5. (5) 设置镜像源</a></li>
<li><a href="#orge53e1bc">1.4.6. (6) pacstrap安装必要的软件</a></li>
<li><a href="#orge83cc13">1.4.7. (7) genfstab</a></li>
<li><a href="#orgc7b21bc">1.4.8. (8) arch-chroot</a></li>
<li><a href="#orgb7eb2e1">1.4.9. (9) 设置时区</a></li>
<li><a href="#orgb9ec7f1">1.4.10. (10) 同步时间为硬件时间</a></li>
<li><a href="#org0ee5b6a">1.4.11. (11) 安装一些软件</a></li>
<li><a href="#org94f791d">1.4.12. (12) 设置本机环境</a></li>
<li><a href="#org4204de1">1.4.13. (13) 设置bootloader引导程序</a></li>
<li><a href="#org1e5c511">1.4.14. (14) 准备拔u盘</a></li>
<li><a href="#org667e56a">1.4.15. (15) 让grub，同样能发现windows的入口</a></li>
<li><a href="#org94f58bf">1.4.16. (16) 在本机环境下的配置</a></li>
<li><a href="#orgfc04d7d">1.4.17. (17) 创建自己日用的一个用户，而不是一个root用户</a></li>
<li><a href="#org4f1222b">1.4.18. (18) 一些设置</a></li>
<li><a href="#orgf9e3350">1.4.19. (19) 准备安装DE</a></li>
<li><a href="#org0ea4394">1.4.20. (20) 启动桌面服务</a></li>
<li><a href="#org14c801d">1.4.21. (21) 安装中文字体</a></li>
<li><a href="#orgdefc477">1.4.22. (22) paru安装</a></li>
<li><a href="#orgb2bc54d">1.4.23. (23) 重新设置本机语言</a></li>
<li><a href="#orgd0b975b">1.4.24. (24) 太美丽啦KDE</a></li>
<li><a href="#org5ea02c5">1.4.25. (25) 一些安装</a></li>
<li><a href="#orgc8f60aa">1.4.26. (26) 打字体补丁</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org1c8c883" class="outline-2">
<h2 id="org1c8c883"><span class="section-number-2">1.</span> 安装archlinux的记录过程</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org819a752" class="outline-3">
<h3 id="org819a752"><span class="section-number-3">1.1.</span> 0. 特别感谢</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><p>
<a href="https://www.bilibili.com/video/BV1ag411K725">【archlinux】双系统真机安装演示</a>
</p>

<blockquote>
<p>
up主是双系统安装，是可以让archlinux与windows共存的方案。
</p>
</blockquote></li>

<li><p>
<a href="https://arch.icekylin.online/guide/rookie/graphic-driver#intel-%E6%A0%B8%E8%8A%AF%E6%98%BE%E5%8D%A1">解决intel核显在KDE sddm下花屏的问题</a>
</p>

<blockquote>
<p>
<b>即不安装xf86-video-intel</b> 而是使用自带的Xorg的modesettings来驱动sddm图形界面。关于。这里特别感谢 <a href="https://github.com/icekylin">icekylin</a>
</p>
</blockquote></li>
</ul>
</div>
</div>
<div id="outline-container-orgd707436" class="outline-3">
<h3 id="orgd707436"><span class="section-number-3">1.2.</span> 1. efi分区扩容</h3>
<div class="outline-text-3" id="text-1-2">
<p>
因为在双系统下Windows默认的efi system为100MiB大小，基本是不够的
</p>

<p>
当我们的当前efi区容量比较小的时候，无论是生成新的bootloader引导文件啊，还是说什么设置什么hackintosh的efi文件，基本都是不够的。
</p>

<p>
如果efi分区容量确实是比较少的话，我们安装Arch Linux的时候就会在grub-install导致生成不了bl文件Grub Error: No Left Space To Create A Directory，导致识别不了新的系统引导文件，装了也是白装，下一次进系统还是windows。
</p>

<p>
所以必须要先在Windows里 <code>磁盘管理(Win+X弹出菜单，然后选择磁盘管理)</code> 都会先分出比如500M或1000M的空间出来，然后通过 <code>cmd</code> 来将 <b>更换efi分区，从而让ArchLinux与windows都使用此efi分区</b> (这仅仅只是我个人的方案哈！)
</p>
<div class="org-src-container">
<pre class="src src-sh"># administrator打开cmd

diskpart

list disk

select disk &lt;分出1024MiB的那个disk的编号&gt;

list partition

create partition efi

format quick fs = fat32

# 创建挂载点别名P
assign letter = P

exit  
</pre>
</div>

<p>
然后更换efi system到挂载点别名P上
</p>
<div class="org-src-container">
<pre class="src src-sh"># 一般来说 2018年后的电脑都有UEFI
bcdboot C:\Windows /s P: /f UEFI
</pre>
</div>

<p>
然后 <b>重启</b> 就可以 <b>更换到 windows 的 efi分区 到 您自己刚才设置的至少500M或至少1000M的分区上了</b>
</p>
</div>
</div>
<div id="outline-container-orgbe26185" class="outline-3">
<h3 id="orgbe26185"><span class="section-number-3">1.3.</span> 2. 下载镜像</h3>
<div class="outline-text-3" id="text-1-3">
<p>
我们到这里 <a href="https://archlinux.org/download/">arch.org</a> 来下载 torrent 磁链文件
</p>

<p>
我推荐的是使用 <code>bitComet</code> (您可以在windows上通过choco或winget来安装) 下载 torrent 里面的内容 (记得最好下载后挂一会bitComet，毕竟P2P模式人人为我我为人人，不过被PCDN检测到的话那另说，一般只是不滥用都是能继续挂的)
</p>

<p>
然后刻盘，我推荐用 <code>rufus 3.2</code> 比较早期的版本(反正我个人的经验是不要用 <code>rufus 4.0</code> 之上的版本)，可以刻录iso
</p>

<p>
找个新U盘，按下 <code>确定</code> 后选用 <code>dd模式</code> 来刻录
</p>

<p>
然后到windows的 <code>磁盘管理</code> (使用Win+X弹出菜单来选择磁盘管理) <b>我们一定要保证分出来的区域，在 [windows磁盘管理] 中，看上去的颜色是 [黑色] 的才行</b>
</p>

<p>
然后分区分个大概100来G吧，基本上就足够了。(您要分得大一点也可以的，最起码保证有30G的空间就足够了)
</p>

<p>
然后插U盘，插上就行了，这时在windows上 <code>肯定是识别不出来的里面有什么文件</code>
</p>

<p>
别管，我们 <code>按住Shift，然后用鼠标点击Windows的重启</code> 然后就会进入到 <code>windows疑难杂症</code> 那里，然后选择 <code>进入固件设置</code>
</p>

<p>
然后在固件设置里，您自己寻找 <code>使用U盘</code> 启动的方式，就可以 <code>进入archiso</code> 了
</p>
</div>
</div>
<div id="outline-container-org45bc220" class="outline-3">
<h3 id="org45bc220"><span class="section-number-3">1.4.</span> 3. archiso过程记录</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-orga594fe2" class="outline-4">
<h4 id="orga594fe2"><span class="section-number-4">1.4.1.</span> (1) 联网iwctl</h4>
<div class="outline-text-4" id="text-1-4-1">
<div class="org-src-container">
<pre class="src src-sh"># 进入interactive界面
iwctl

# 查看笔记本的网卡(wlan0)
device list

# 让笔记本网卡(wlan0)扫描附近网络
station wlan0 scan

# 让笔记本网卡(wlan0)获取附近网络
station wlan0 get-networks

# 联网
station wlan0 connect 网络

# 退出iwctl
exit
</pre>
</div>
</div>
</div>
<div id="outline-container-org3f4b0be" class="outline-4">
<h4 id="org3f4b0be"><span class="section-number-4">1.4.2.</span> (2) 设置系统时间</h4>
<div class="outline-text-4" id="text-1-4-2">
<div class="org-src-container">
<pre class="src src-sh"># 设置系统时间
timedatectl set-ntp true
</pre>
</div>
</div>
</div>
<div id="outline-container-org8135a4c" class="outline-4">
<h4 id="org8135a4c"><span class="section-number-4">1.4.3.</span> (3) fdisk分区</h4>
<div class="outline-text-4" id="text-1-4-3">
<div class="org-src-container">
<pre class="src src-sh"># 查看硬盘分区情况(笔记本唯一的一个固态硬盘: /dev/sda)
lsblk

# 查看硬盘信息
# 我这里的情况是，我不一定能保证您的 [磁盘名称] 也是不是这样，如果不确定的话，请到一步一步跟着视频教程来 https://www.bilibili.com/video/BV1ag411K725
# + ESP分区: /dev/sda4
# + 135GiB空间主分区: /dev/sda8
fdisk -l

# 然后进行初始化
# 这一步就 [相当于是将windows磁盘管理的⚫黑色分区，初始化为windows磁盘管理的🔵蓝色分区，我自己就是大致描述，希望您能理解到那个意思就行]
fdisk /dev/sda
# Press n    # n 就是 n键
# Press RET  # RET 就是 Enter键
# Press RET  # RET 就是 Enter键
# Press RET  # RET 就是 Enter键
# Press w    # w 就是 w键

# 然后给此分区加上签名，有ext4、zfs、btrfs等等
# 我个人只推荐使用 ext4 而不建议在非商业发行版上使用 btrfs (原因是非商业版的btrfs炸了没得修，个人不会修btrfs就这样)
# /dev/sda8 是我的135GiB空间主分区，我不一定能保证您的 [磁盘名称] 也是不是这样，如果不确定的话，请到一步一步跟着视频教程来 https://www.bilibili.com/video/BV1ag411K725
mkfs.ext4 /dev/sda8
</pre>
</div>
</div>
</div>
<div id="outline-container-orgedf4c9f" class="outline-4">
<h4 id="orgedf4c9f"><span class="section-number-4">1.4.4.</span> (4) 挂载分区</h4>
<div class="outline-text-4" id="text-1-4-4">
<p>
解释
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">名词</th>
<th scope="col" class="org-left">名词解释</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>挂载mount</code></td>
<td class="org-left"><code>在一颗B+文件树里面，将两个树节点连接起来的意思</code> 我自己就是大致描述，希望您能理解到那个意思就行</td>
</tr>

<tr>
<td class="org-left"><code>挂载分区</code></td>
<td class="org-left">这个词指的是 <code>将存放操作系统的磁盘，放在想要放的位置路径空间上</code> 我自己就是大致描述，希望您能理解到那个意思就行</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-sh"># 我不一定能保证您的 [磁盘名称] 也是不是这样，如果不确定的话，请到一步一步跟着视频教程来 https://www.bilibili.com/video/BV1ag411K725  
# 我不一定能保证您的 [磁盘名称] 也是不是这样，如果不确定的话，请到一步一步跟着视频教程来 https://www.bilibili.com/video/BV1ag411K725
# 我不一定能保证您的 [磁盘名称] 也是不是这样，如果不确定的话，请到一步一步跟着视频教程来 https://www.bilibili.com/video/BV1ag411K725

# 挂载主分区           (我的笔记本是/dev/sda8)到/mnt
mount /dev/sda8 /mnt

# 挂载EFI System分区   (我的笔记本是/dev/sda4)到/mnt/boot		# UEFI启动是这样的，MBR启动应该不用挂载
mkdir /mnt/boot
mount /dev/sda4 /mnt/boot	# 正是由于这里，所以会遇到后面的ESP大小容量不够导致的一个小问题: Grub Error: No Left Space To Create A Directory.  
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc8b6e10" class="outline-4">
<h4 id="orgc8b6e10"><span class="section-number-4">1.4.5.</span> (5) 设置镜像源</h4>
<div class="outline-text-4" id="text-1-4-5">
<div class="org-src-container">
<pre class="src src-sh"># 使用vim打开mirrorlist
vim /etc/pacman.d/mirrorlist

# 并添加下面的ustc(中科大)的镜像源
Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
</pre>
</div>
</div>
</div>
<div id="outline-container-orge53e1bc" class="outline-4">
<h4 id="orge53e1bc"><span class="section-number-4">1.4.6.</span> (6) pacstrap安装必要的软件</h4>
<div class="outline-text-4" id="text-1-4-6">
<div class="org-src-container">
<pre class="src src-sh"># 作用: 让 pacstrap装修师傅 对着 /mnt 这个新家，进行装修(安装软件)
pacstrap /mnt base base-devel linux linux-firmware dhcpcd
</pre>
</div>
</div>
</div>
<div id="outline-container-orge83cc13" class="outline-4">
<h4 id="orge83cc13"><span class="section-number-4">1.4.7.</span> (7) genfstab</h4>
<div class="outline-text-4" id="text-1-4-7">
<div class="org-src-container">
<pre class="src src-sh">
# 作用: genfstab，好像是让它能识别到SWAP分区之类的
genfstab -L /mnt &gt;&gt; /mnt/etc/fstab

# 查看(我的笔记本)情况
# /dev/sda8   =&gt;   /	   btrfs
# /dev/sda4   =&gt;   /boot   vfat
cat /mnt/etc/fstab
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc7b21bc" class="outline-4">
<h4 id="orgc7b21bc"><span class="section-number-4">1.4.8.</span> (8) arch-chroot</h4>
<div class="outline-text-4" id="text-1-4-8">
<div class="org-src-container">
<pre class="src src-sh"># 作用: 把自己搬进了毛胚房新家(此时的/mnt新家，还是刚装修完，装修师傅没有打扫卫生，自己的行李还没放置进去)
arch-chroot /mnt

# 效果
# root@archiso ~#  会改成=&gt;会改成  [root@archiso /]#
</pre>
</div>
<p>
```
</p>
</div>
</div>
<div id="outline-container-orgb7eb2e1" class="outline-4">
<h4 id="orgb7eb2e1"><span class="section-number-4">1.4.9.</span> (9) 设置时区</h4>
<div class="outline-text-4" id="text-1-4-9">
<div class="org-src-container">
<pre class="src src-sh"># 设置时间区域为亚洲/上海(Asia/Shanghai)
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb9ec7f1" class="outline-4">
<h4 id="orgb9ec7f1"><span class="section-number-4">1.4.10.</span> (10) 同步时间为硬件时间</h4>
<div class="outline-text-4" id="text-1-4-10">
<div class="org-src-container">
<pre class="src src-sh"># hwclock  
hwclock --systohc
</pre>
</div>
</div>
</div>
<div id="outline-container-org0ee5b6a" class="outline-4">
<h4 id="org0ee5b6a"><span class="section-number-4">1.4.11.</span> (11) 安装一些软件</h4>
<div class="outline-text-4" id="text-1-4-11">
<div class="org-src-container">
<pre class="src src-sh"># vim在快速编辑一些文件还是很有用武之地的，还是十分推荐安装vim.....
pacman -S vim dialog wpa_supplicant ntfs-3g networkmanager netctl
</pre>
</div>
<p>
```
</p>
</div>
</div>
<div id="outline-container-org94f791d" class="outline-4">
<h4 id="org94f791d"><span class="section-number-4">1.4.12.</span> (12) 设置本机环境</h4>
<div class="outline-text-4" id="text-1-4-12">
<div class="org-src-container">
<pre class="src src-sh"># 设置语言
# en_US.UTF-8 UTF-8	改成=&gt;改成    en_US.UTF-8 UTF-8
# zh_CN.UTF-8 UTF-8	改成=&gt;改成    zh_CN.UTF-8 UTF-8
# zh_TW.UTF-8 UTF-8	改成=&gt;改成    zh_TW.UTF-8 UTF-8
# zh_HK.UTF-8 UTF-8	改成=&gt;改成    zh_HK.UTF-8 UTF-8
vim /etc/locale.gen

# 生成语言项
locale-gen

# 设置系统环境语言
#			改成=&gt;改成    LANG=en_US.UTF-8
vim /etc/locale.conf

# 设置主机名( 主机名 要记住)
# 			改成=&gt;改成    kle(你自己设置一个名称，比如我这里设置kle，后面就要用到kle)
vim /etc/hostname

# 激活主机名
# 127.0.0.1 localhost
# ::1 localhost
# 127.0.1.1 kle.localdomain kle  (kle是我自己的 主机名 )
vim /etc/hosts

# 设置root密码
passwd

# 安装intel CPU微码
pacman -S intel-ucode
</pre>
</div>
</div>
</div>
<div id="outline-container-org4204de1" class="outline-4">
<h4 id="org4204de1"><span class="section-number-4">1.4.13.</span> (13) 设置bootloader引导程序</h4>
<div class="outline-text-4" id="text-1-4-13">
<div class="org-src-container">
<pre class="src src-sh"># 不弄会怎样？那bootloader就找不到archlinux
# 那么您下次进入系统还是windows，即使您进入了bios固件设置，仍然只会找到windows的引导文件
# bootloader作用: 用的grub来让硬件驱动起来，来跑软件(这里的软件指的是操作系统)

# os-prober: 是为了安装让archlinux与windows10双系统共存
# 与时俱进: 好像说不用装这个了，但为了以防万一还是装上吧！
pacman -S os-prober ntfs-3g
pacman -S grub efibootmgr

# 是的没错！台式机就是因为ESP分区太小了(台式机装了windows10默认是100MiB, 视频演示是200MiB的EFI System，我自己的笔记本是1000MiB的EFI System)，导致Grub Error: No Space Left to Create A Directory.
# 是这个原因: 视频主教的是把 [efi分区] 全部挂载到 [挂载点: /boot] 下。
# 是这个方案: 把 [efi分区] 单独挂载到 [挂载点: /efi] 下。
# Installation finished. No error reported.
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub

# grub-mkconfig 输出生成grub配置文件(此时环境: U盘里面，所以应该是只有 [archlinux] 该软件(这里的软件指的是操作系统))
cd /boot &amp;&amp; mkdir grub
cd ../
grub-mkconfig -o /boot/grub/grub.cfg
</pre>
</div>
</div>
</div>
<div id="outline-container-org1e5c511" class="outline-4">
<h4 id="org1e5c511"><span class="section-number-4">1.4.14.</span> (14) 准备拔u盘</h4>
<div class="outline-text-4" id="text-1-4-14">
<div class="org-src-container">
<pre class="src src-sh">exit
# 效果: [root@archiso /]#   会改成=&gt;会改成    root@archiso ~#

reboot
# 重启，黑屏了就拔u盘，防止二次进入archiso(这得看主板那时的设置)

# 备注
# + 如果您出先了 "watchdog did not stop" 的提示，最好等待个10来分钟左右，不要拔U盘，等待了10分钟之后直接硬件关机然后再拔U盘不然装不上的，如果出现了并强行拔下来的话需要重装从这句话之上面的每一步。
# + 反正我自己今年4月份安装的时候，在我自己这台笔记本上是这样的
# + 但是现在2024年10月1日的镜像不用等了，直接当电脑黑屏就能直接拔U盘了。

# OK
# + 如果您拔了U盘之后，一般来说就会进入到 [全新安装好的ArchLinux了]
# + 然后我们在tty上登陆
# + 输入 "root" 字符
# + 输入 "您刚刚您自己设置过的密码" (密码不会回显的)  
</pre>
</div>
</div>
</div>
<div id="outline-container-org667e56a" class="outline-4">
<h4 id="org667e56a"><span class="section-number-4">1.4.15.</span> (15) 让grub，同样能发现windows的入口</h4>
<div class="outline-text-4" id="text-1-4-15">
<div class="org-src-container">
<pre class="src src-sh"># 这是我跟着 https://www.bilibili.com/video/BV1ag411K725 视频教程来一步一步做的，视频怎么样我就怎么样
# 
# 作用
# + 生成grub引导文件，从而在grub引导菜单时，也能选择windows10去跑软件(这里的软件指的是windows10操作系统)起来
# + grub-mkconfig 输出生成grub配置文件(此时环境: 笔记本里面)
grub-mkconfig -o /boot/grub/grub.cfg	       	
</pre>
</div>
</div>
</div>
<div id="outline-container-org94f58bf" class="outline-4">
<h4 id="org94f58bf"><span class="section-number-4">1.4.16.</span> (16) 在本机环境下的配置</h4>
<div class="outline-text-4" id="text-1-4-16">
<div class="org-src-container">
<pre class="src src-sh"># 网络连接
# + 如果是有线网线连接的话，就已经连上网了。于是跳到SWAP分区dd if那里
# + 如果是无线连接的话，必须进行下面的步骤。

# 首先，无论有线无线网络连接，必须先开启服务
systemctl enable NetworkManager
systemctl start NetworkManager
# 无线联网(如果是有线的话，在开启上面的服务后就可以直接联网了)
# + 当然用 [nmtui] 其实更快。
nmcli dev wifi list
nmcli dev wifi connect "网络名" password "密码"

# 设置SWAP分区(SWAP分区为2048MiB~2GiB大小)
dd if=/dev/zero of=/swapfile bs=1M count=2048 status=progress
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile

# 手搓一下fstab，来开启SWAP
vim /etc/fstab

# 使用vim来添加下面的文本
/swapfile     none    swap      defaults                0 0
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfc04d7d" class="outline-4">
<h4 id="orgfc04d7d"><span class="section-number-4">1.4.17.</span> (17) 创建自己日用的一个用户，而不是一个root用户</h4>
<div class="outline-text-4" id="text-1-4-17">
<div class="org-src-container">
<pre class="src src-sh"># 我的日用用户名是: kle
useradd -m -G wheel kle

# 然后第1次输入 日用用户名的密码
# 然后第2次输入 日用用户名的密码
passwd 日用用户名
</pre>
</div>
</div>
</div>
<div id="outline-container-org4f1222b" class="outline-4">
<h4 id="org4f1222b"><span class="section-number-4">1.4.18.</span> (18) 一些设置</h4>
<div class="outline-text-4" id="text-1-4-18">
<div class="org-src-container">
<pre class="src src-sh"># 安装sudo
pacman -S sudo

# 编辑器设置(为了用visudo) sudo vim /etc/sudoers
ln -s /usr/bin/vim /usr/bin/vi

# 编辑进行下面的修改
visudo
#%wheel ALL=(ALL:ALL) ALL    改成=&gt;改成    %wheel ALL=(ALL:ALL) ALL

# 切换到日用用户名，并且通过su，来给予root权限 (我自己的日用用户名是: kle)
su kle
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf9e3350" class="outline-4">
<h4 id="orgf9e3350"><span class="section-number-4">1.4.19.</span> (19) 准备安装DE</h4>
<div class="outline-text-4" id="text-1-4-19">
<div class="org-src-container">
<pre class="src src-sh"># 开启一些可用仓库源
#[multilib]			     改成=&gt;改成    [multilib]
#include=/etc/pacman.d/mirrorlist    改成=&gt;改成    include=/etc/pacman.d/mirrorlist
#				     改成=&gt;改成    [archlinuxcn]					
#				     改成=&gt;改成    Server = https://repo.archlinuxcn.org/$arch
sudo vim /etc/pacman.conf

# 强制开滚，保持与archlinuxcn源的同步
sudo pacman -Syy

# archlinuxcn的密钥环
# + 好像是因为人手不够，删除了一个master key
# + 导致fc教授的可信程度设置到marginal trust导致的
# + 现在手动要信任sudo pacman -Syy后存在机器本地的fc教授farseerfc的密钥
sudo pacman-key --lsign-key "farseerfc@archlinux.org"
# 这一步的钩子函数运行时间，较长，静静等待就好。
sudo pacman -S archlinuxcn-keyring

# 显卡驱动
# + archlinux，拒绝N卡闭源驱动，不然KP警告！我笔记本有Intel核显就用核显了
# + 致敬在ArchLinux下使用N卡闭源驱动的勇士(就是那个官网下载下来的xxxx.run脚本执行的那个)

# 接下来要装什么包的说明
# + https://wiki.archlinuxcn.org/wiki/Xorg#%E5%AE%89%E8%A3%85
# + 比如在我个人的笔记本上，不要安装这个xf86-intel-video，否则将会导致sddm登录界面花屏闪烁
# + 导致永远无法通过sddm切换其余的桌面环境(但是盲输密码是可以登录KDE plasma on Wayland的)
# + 不安装xf86-video-intel时，会默认使用自带的Xorg的modesetting。
sudo pacman -S mesa     	       			   

# 安装美丽现代的KDE(均使用SDDM桌面管理器)
sudo pacman -S xorg plasma kde-applications sddm network-manager-applet
# + 然后一直RET(Enter)下去就行了，按个大概10来次都确定就行了
# + 因为 https://www.bilibili.com/video/BV1ag411K725 视频教程也是全部确定的
</pre>
</div>
</div>
</div>
<div id="outline-container-org0ea4394" class="outline-4">
<h4 id="org0ea4394"><span class="section-number-4">1.4.20.</span> (20) 启动桌面服务</h4>
<div class="outline-text-4" id="text-1-4-20">
<div class="org-src-container">
<pre class="src src-sh"># 打开桌面管理器sddm，它的功能即名称 "桌面管理器" 反正打开服务就是了
sudo sytemctl enable sddm

# 关闭一些服务
sudo systemctl disable netctl

# 开启网络服务
sudo systemctl enable NetworkManager
</pre>
</div>
</div>
</div>
<div id="outline-container-org14c801d" class="outline-4">
<h4 id="org14c801d"><span class="section-number-4">1.4.21.</span> (21) 安装中文字体</h4>
<div class="outline-text-4" id="text-1-4-21">
<div class="org-src-container">
<pre class="src src-sh">sudo pacman -S wqy-microhei wqy-microhei-lite wqy-bitmapfont wqy-zenhei ttf-arphic-ukai ttf-arphic-uming adobe-source-han-sans-cn-fonts noto-fonts-cjk
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdefc477" class="outline-4">
<h4 id="orgdefc477"><span class="section-number-4">1.4.22.</span> (22) paru安装</h4>
<div class="outline-text-4" id="text-1-4-22">
<div class="org-src-container">
<pre class="src src-sh"># 这一步可以先在配置了本地代理后再安装，不然装一些crates包挺慢的
# 这一步可以先在配置了本地代理后再安装，不然装一些crates包挺慢的
# 这一步可以先在配置了本地代理后再安装，不然装一些crates包挺慢的
cd $home
mkdir .paru/ &amp;&amp; cd .paru/
sudo pacman -S git
git clone https://aur.archlinux.org/paru.git 
cd paru
makepkg -si
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb2bc54d" class="outline-4">
<h4 id="orgb2bc54d"><span class="section-number-4">1.4.23.</span> (23) 重新设置本机语言</h4>
<div class="outline-text-4" id="text-1-4-23">
<div class="org-src-container">
<pre class="src src-sh">
# 重新设置本机语言
sudo vim /etc/locale.conf
# LANG=en_US.UTF-8    改成=&gt;改成    LANG=zh_CN.UTF-8
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd0b975b" class="outline-4">
<h4 id="orgd0b975b"><span class="section-number-4">1.4.24.</span> (24) 太美丽啦KDE</h4>
<div class="outline-text-4" id="text-1-4-24">
<div class="org-src-container">
<pre class="src src-sh">sudo reboot
</pre>
</div>
</div>
</div>
<div id="outline-container-org5ea02c5" class="outline-4">
<h4 id="org5ea02c5"><span class="section-number-4">1.4.25.</span> (25) 一些安装</h4>
<div class="outline-text-4" id="text-1-4-25">
<div class="org-src-container">
<pre class="src src-sh"># 安装fcitx5全家桶
sudo pacman -S fcitx5-im fcitx5-chinese-addons fcitx5-rime fcitx5-material-color
# 编辑开机启动fcitx5
#        	改成=&gt;改成	GTK_IM_MODULE=fcitx
#        	改成=&gt;改成	QT_IM_MODULE=fcitx
#        	改成=&gt;改成	XMODIFIERS=@im=fcitx
#        	改成=&gt;改成    	SDL_IM_MODULE=fcitx
sudo vim /etc/environment

# 在KDE下，需要
#	&gt; 系统设置
#	&gt; 键盘
#	&gt; 虚拟键盘
#	&gt; 选择 "Fcitx5" (而不是 "Fcitx5 Wayland启动器(实.."))
#
# 来让KDE桌面环境，识别出fcitx5。从而自己在send-key时，能发C-SPC到KDE on Wayland上，进行切换输入法。

# 电池充电阈值
# + 需要看厂商的硬件支持
# + 如果用windows11时能开启的话这里也能开启，如果没有的话那就开不了)
sudo systemctl disable tlp
sudo systemctl stop tlp

# 您自己看情况修改，比如我这里是当充电少于75%就开始充电，充电到80%就停下。
# + 具体的必须看主板厂商 [如何安排这些硬件的名称]
# + 具体的必须看主板厂商 [如何安排这些硬件的功能]
sudo vim /etc/tlp.conf
#START_CHARGE_THRESH_BAT0=75    =&gt;    START_CHARGE_THRESH_BAT0=75
#STOP_CHARGE_THRESH_BAT0=80    =&gt;    STOP_CHARGE_THRESH_BAT0=80

# 开启电池管理阈值服务
sudo systemctl enable tlp

# 终端模拟器
# + 我用习惯了alacritty而已，kitty也行
sudo pacman -S alacritty

# 我现在个人用的是X11桌面服务器
# + 原因是今年5月Hyprland刚脱离wlr那会，在Wayland的Hyprland(窗管原神)，半天就崩溃了Emacs几十次，都用到有点PTSD了，所以故全面转向X11
# + 如果您用的是X11的话，那就不用设置下面的。
# + 如果您用的是Wayland的话，而且还用的是alacritty终端模拟器的话，那就需要设置下面的。
# alacritty走x11协议
#			改成=&gt;改成      WINIT_UNIX_BACKEND=x11 alacritty
sudo vim /etc/environment

# + 如果是kitty的话，换成 WINIT_UNIX_BACKEND=x11 kitty
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc8f60aa" class="outline-4">
<h4 id="orgc8f60aa"><span class="section-number-4">1.4.26.</span> (26) 打字体补丁</h4>
<div class="outline-text-4" id="text-1-4-26">
<blockquote>
<p>
在 <a href="https://github.com/colfwe/dotfiles">colfwe/dotfiles</a> 这里有说如何详细地打字体补丁
</p>
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2024-10-31 四 22:35</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
