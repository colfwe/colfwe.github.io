* ä¸€æ­¥ä¸€æ­¥è°ƒè¯•å‡ºtelega-serverçš„ç™»å½•ç™»ä¸ä¸Šçš„é—®é¢˜

** åŸºæœ¬ä»‹ç»

è®²è¿°äº†åœ¨WSLç¯å¢ƒä¸‹ï¼Œè°ƒè¯•telega-serverè¿‡ç¨‹ï¼Œç»ˆäºæ˜¯è§£å†³äº†telega-serverçš„ç™»å½•é—®é¢˜

#+begin_quote
/æå‰å£°æ˜: æˆ‘è‡ªå·±ä¸ä¼šè¿™äº›ä»£ç†çš„äº‹æƒ…ï¼Œæˆ‘è‡ªå·±åªæƒ³åœ¨ä¸Šé¢å¬éŸ³ä¹ã€çœ‹æ²™é›•å›¾ã€çœ‹åœ¨èŠ±æ–°é—»/
/æå‰å£°æ˜: æˆ‘è‡ªå·±ä¸ä¼šè¿™äº›ä»£ç†çš„äº‹æƒ…ï¼Œæˆ‘è‡ªå·±åªæƒ³åœ¨ä¸Šé¢å¬éŸ³ä¹ã€çœ‹æ²™é›•å›¾ã€çœ‹åœ¨èŠ±æ–°é—»/
/æå‰å£°æ˜: æˆ‘è‡ªå·±ä¸ä¼šè¿™äº›ä»£ç†çš„äº‹æƒ…ï¼Œæˆ‘è‡ªå·±åªæƒ³åœ¨ä¸Šé¢å¬éŸ³ä¹ã€çœ‹æ²™é›•å›¾ã€çœ‹åœ¨èŠ±æ–°é—»/
#+end_quote

** é—®é¢˜æè¿°

åœ¨ç¼–è¯‘ä¸å®‰è£…äº†æœ€æ–°çš„tdlibå(=https://github.com/tdlib/td.git=)

åŒæ—¶å®‰è£…äº†telega.elå¹¶buildå‡ºtelega-serverå

åœ¨GNU Emacsé‡Œé¢æ‰§è¡Œtelegaå‡½æ•°

è¿›å…¥telega.elå…ˆæ˜¯ä¼šè¿™æ ·:

#+begin_example
Auth WaitPhoneNumber



=========================modeline============================
phone number: +
#+end_example

ç„¶ååœ¨è¾“å…¥äº†è´¦å·ååï¼Œä¼šåœ¨ *ä¸€ç¬é—´ï¼Œç«‹å³* å˜æˆè¿™æ ·
#+begin_example
Connecting....


=========================modeline============================
#+end_example

å¹¶ä¸”æ°¸è¿œéƒ½æ˜¯ ~Connecting....~

#+begin_example
Connecting....


=========================modeline============================
#+end_example

** è§£å†³æ–¹æ³•

å…¶å®æ˜¯è¿™ä¸ªåŸå› 

[[file:../res/telega-serverä¸tdlibä¸é€šçš„åŸå› .png]]

ç„¶åè®¾ç½®zevlgä½œè€…ï¼Œåœ¨telega.elä¸‹æä¾›çš„telega-proxieså˜é‡å°±è¡Œäº†

#+begin_src elisp
  ;; :portå¡«ä½ ä¸»æœºå¯åŠ¨ä»£ç†æœåŠ¡çš„ç«¯å£ï¼Œä¸€èˆ¬æ¥è¯´å¥½çš„
(setq telega-proxies
      (list
       `(:server "127.0.0.1"
         :port 4781
         :enable t
         :type (:@type "proxyTypeSocks5"
                       :username ""
                       :password ""))))
#+end_src

** è°ƒè¯•è¿‡ç¨‹(TLDR)

*** å…ˆæ€€ç–‘æ˜¯å›¾å½¢æ¡Œé¢æœåŠ¡å™¨çš„é—®é¢˜ï¼Œç»“æœä¸æ˜¯

ä¸€å¼€å§‹æˆ‘å…ˆæ€€ç–‘çš„å¯èƒ½æ˜¯å›¾å½¢æ¡Œé¢æœåŠ¡å™¨çš„é—®é¢˜ï¼Œå› ä¸ºç°åœ¨çš„ç¯å¢ƒæ˜¯ ~WSL-archlinuxæ˜¯ç”¨è´¦æˆ·å~ ç™»å½•çš„ï¼Œä½†æ˜¯åœ¨ ~archlinuxä¸‹æ˜¯ç”¨äºŒç»´ç ~ ç™»å½•çš„

äºæ˜¯æ‰¾äº†å¾ˆå¤šå¾ˆå¤šèµ„æ–™ï¼Œåˆè®¾ç½®ç¼–è¯‘flagå•Š =--with-x-tookit=gtk3, --with-rsvg=

åˆå»telega.elç¾¤èŠæ‰¾é—®é¢˜å•Šï¼Œä½†æ˜¯ä½œè€…zevlgåœ¨ç¾¤é‡Œé¢å¤§æ„è¯´ â€œåªè¦ ~telega-use-images~ æœ‰éç©ºæ•°å€¼ï¼Œå°±å¯ä»¥ç”¨äºŒç»´ç ç™»å½•â€

æˆ‘çœ‹äº†ä¸‹æˆ‘çš„

#+begin_src elisp
  ; C-h v telega-use-images
  scale rotate90  
#+end_src

ç¡®å®æ˜¯ telega-use-images æœ‰éç©ºæ•°å€¼ï¼Œäºæ˜¯åº”è¯¥æ˜¯ç”¨äºŒç»´ç ç™»å½•çš„å‘€ï¼Ÿ

ç„¶åæˆ‘å°±åå¤æ€è€ƒï¼Œè¿˜æ˜¯æ€è€ƒä¸å‡ºæ¥

æˆ‘å”¯ä¸€èƒ½åˆ¤æ–­çš„åŸå› ï¼Œåº”è¯¥æ˜¯WSLgæ˜¯RDPè½¬å‘X11æ—¶ï¼Œå‡ºç°äº†ä¸€äº›ç¯å¢ƒé—®é¢˜å¯¼è‡´çš„ã€‚

*** åˆ°æ€€ç–‘å¯èƒ½æ˜¯ä»£ç†çš„é—®é¢˜ï¼Œç»“æœä¹Ÿä¸æ˜¯

äºæ˜¯æˆ‘å°è¯•ä½¿ç”¨è´¦æˆ·åç™»å½•ï¼Œä½†åªè¦ä¸€è¾“å…¥æ‰‹æœºå·æŒ‰å›è½¦åï¼Œå®ƒå°±ä¸€å®šä¼š

#+begin_example
Connecting....


=========================modeline============================
#+end_example

äºæ˜¯åœ¨æˆ‘å½“å‰çš„ç¯å¢ƒä¸‹ï¼Œå°è¯•äº†ä¸æœåŠ¡å™¨é€šä¿¡

#+begin_src html
<!-- curl -v https://api.telegram.org -->
<html> 
  <head><title>302 Found</title></head>
  <body>
    <center><h1>302 Found</h1></center>
    <hr><center>nginx/1.18.0</center>
  </body>
</html>  
#+end_src

å‘ç°ç¡®å®æ˜¯é€šçš„ï¼Œä½†ç°åœ¨åœ¨telega-server(telega.el)ä¸‹ï¼Œå°±ä¸€ç›´éƒ½æ˜¯

#+begin_example
Connecting....


=========================modeline============================
#+end_example

è¯´æ˜ä¸å¯èƒ½æ˜¯ä»£ç†çš„åŸå› 

*** æœ€åç¡®å®šäº†ï¼ŒåŸæ¥æ˜¯ç¯å¢ƒé—®é¢˜

#+begin_quote
/telega-serverä¸tdlibè¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨æ­¤è¿‡ç¨‹é‡Œï¼Œæ²¡æœ‰è¯»å–æœ¬æœºç³»ç»Ÿä»£ç†ç¯å¢ƒå˜é‡å¯¼è‡´çš„/
#+end_quote

äºæ˜¯æ‰“å¼€telegaçš„è°ƒè¯•

#+begin_src elisp
(setq telega-debug t)
(setq telega-tdlib-log-level 4)
#+end_src

å»çœ‹ ~*Message*~ å…ˆæ˜¯å‘ç°åœ¨Auth WaitPhoneNumberæ—¶ï¼Œä¸€æ—¦è¾“å…¥è´¦å·ï¼Œå°±ä¼šå‡ºç°è¿™æ ·çš„æ—¥å¿—

#+begin_example
OUTPUT: send 33 (:@extra 1 :@type "disableProxy")
#+end_example

ç„¶åç¡®å®šä¸‹æ¥äº†ï¼Œåº”è¯¥å°±æ˜¯proxyä»£ç†çš„é—®é¢˜ï¼Œè€Œä¸”ä¸€å®šæ˜¯telega-serverä¸tdlibè¿›è¡Œé€šä¿¡çš„è¿‡ç¨‹ä¸­ *åœ¨æ­¤è¿‡ç¨‹é‡Œ* æ²¡æœ‰è¯»å–æœ¬æœºç³»ç»Ÿä»£ç†ç¯å¢ƒå˜é‡å¯¼è‡´çš„

äºæ˜¯å»telega.elç¾¤èŠé‡Œæ‰¾ä½œè€…çš„å†å²è®°å½•ï¼Œå¾ˆå·§çš„æ˜¯æ—©åœ¨23å¹´æ—¶å°±å·²ç»æœ‰ä¸€è¥¿ç­ç‰™è€å“¥/è€å§å°±é‡åˆ°äº†è¿™ä¸ªé—®é¢˜

é¡ºå¸¦ä¸€è¯´ï¼Œä½œè€…zevlgçœŸçš„è´¼çƒ­å¿ƒï¼Œæ›¾ç»åœ¨å¾ˆä¹…ä¹‹å‰å°±å·²ç»å¾ˆçƒ­å¿ƒåœ°å›ç­”è¿‡äº†è¿™ä¸ªé—®é¢˜

é™„å¸¦ä¸€ä¸‹å½“æ—¶çš„èŠå¤©è®°å½•(ç›´æ¥ä»telega.elä¸­å¤åˆ¶ç²˜è´´å‡ºæ¥çš„)
#+begin_example
JJ edited 23.03.24 -'11
In spain are blocking acces to telegram


1ğŸ˜±(C) 23.03.24 
Evgeny Zajcev() â€¢ @zevlg (owner)
-' @jjibagar> In spain are blocking acces to telegram
telega.el has support for proxies 23.03.24


JJ â€¢ @jjibagar
-' @zevlg> telega.el has support for proxies
vpn? 23.03.24


Evgeny Zajcev() â€¢ @zevlg (owner)
-' @jjibagar> vpn?
No, native Telegram proxies 23.03.24


JJ â€¢ @jjibagar
-' @zevlg> No, native Telegram proxies
where i can find info for this? 23.03.24


Evgeny Zajcev() â€¢ @zevlg (owner)
-' @jjibagar> where i can find info for this?
See docstring for the telega-proxies user option
1ğŸ‘(L) 23.03.24


JJ â€¢ @jjibagar
-' @zevlg> See docstring for the telega-proxies user option
ok, thanks
#+end_example

äºæ˜¯è®¾ç½®äº† telega-proxies å˜é‡ï¼Œå°±åƒ ~** è§£å†³æ–¹æ³•~ è¿™é‡Œè®¾ç½®çš„ä¸€æ ·

ç„¶åå°±æœ‰ä»
#+begin_example
Connecting....


=========================modeline============================
#+end_example

å°±å˜æˆäº†
#+begin_example
Ready


=========================modeline============================
#+end_example

äºæ˜¯ç»ˆäºå¯ä»¥ç™»å½•ä¸Šå»äº†.................
